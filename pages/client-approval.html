<!-- ADMIN CLIENT APPROVAL PAGE -->

<!-- Page Header -->
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
    <div>
        <h2 style="margin: 0 0 8px 0; color: #111827;">Client Approval Requests</h2>
        <p style="margin: 0; color: #6b7280;">Review and approve consignee requests from clients</p>
    </div>
    <button id="refreshRequestsBtn" style="background: linear-gradient(135deg, #111827 0%, #374151 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px;">
        <span class="material-symbols-outlined" style="font-size: 20px;">refresh</span>
        Refresh
    </button>
</div>

<!-- Stats Cards -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 24px; margin-bottom: 32px;">
    <div class="card" style="padding: 24px; text-align: center;">
        <div style="font-size: 32px; font-weight: 700; color: #f59e0b; margin-bottom: 8px;" id="pendingCount">0</div>
        <div style="color: #6b7280; font-size: 14px;">Pending Requests</div>
    </div>
    <div class="card" style="padding: 24px; text-align: center;">
        <div style="font-size: 32px; font-weight: 700; color: #10b981; margin-bottom: 8px;" id="approvedCount">0</div>
        <div style="color: #6b7280; font-size: 14px;">Approved Today</div>
    </div>
    <div class="card" style="padding: 24px; text-align: center;">
        <div style="font-size: 32px; font-weight: 700; color: #dc2626; margin-bottom: 8px;" id="rejectedCount">0</div>
        <div style="color: #6b7280; font-size: 14px;">Rejected Today</div>
    </div>
</div>

<!-- Pending Requests Table -->
<div class="card">
    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 24px;">
        <h3 style="margin: 0; color: #111827;">Pending Consignee Requests</h3>
        <div id="requestCount" style="color: #6b7280; font-size: 14px;">0 requests</div>
    </div>

    <!-- Empty State -->
    <div id="requestsEmpty" style="text-align: center; padding: 60px; border-radius: 10px; border: 2px dashed #e5e7eb; color: #9ca3af;">
        <span class="material-symbols-outlined" style="font-size: 48px; color: #d1d5db; margin-bottom: 16px;">approval</span>
        <div style="font-weight: 600; margin-bottom: 8px; color: #6b7280;">No pending requests</div>
        <div style="color: #9ca3af; margin-bottom: 16px;">All consignee requests have been processed</div>
        
    </div>

    <!-- Table Wrapper -->
    <div id="requestsTableWrapper" style="display: none;">
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #f9fafb;">
                        <th style="padding: 16px 24px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">Company</th>
                        <th style="padding: 16px 24px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">Consignee Name</th>
                        <th style="padding: 16px 24px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">Address</th>
                        <th style="padding: 16px 24px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">City</th>
                        <th style="padding: 16px 24px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">Phone</th>
                        <th style="padding: 16px 24px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">Requested</th>
                        <th style="padding: 16px 24px; text-align: center; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">Actions</th>
                    </tr>
                </thead>
                <tbody id="requestsTableBody"></tbody>
            </table>
        </div>
    </div>
</div>

<!-- Approval Modal -->
<div id="approvalModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
    <div style="background: white; border-radius: 12px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;">
        <!-- Modal Header -->
        <div style="padding: 24px 24px 0 24px; border-bottom: 1px solid #e5e7eb; margin-bottom: 24px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3 id="modalTitle" style="margin: 0; color: #111827;">Review Consignee Request</h3>
                <button id="closeModalBtn" style="background: none; border: none; cursor: pointer; padding: 8px; border-radius: 6px; color: #6b7280;">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
        </div>

        <!-- Modal Body -->
        <div style="padding: 0 24px 24px 24px;">
            <div id="consigneeDetails" style="margin-bottom: 24px;">
                <!-- Consignee details will be populated here -->
            </div>

            <!-- Consignee Number Assignment (only shown when approving) -->
            <div id="consigneeNumberSection" style="display: none; margin-bottom: 24px;">
                <label style="display: block; font-weight: 500; color: #374151; margin-bottom: 8px;">Assign Consignee Number</label>
                <input type="text" id="consigneeNumber" placeholder="Enter consignee number" style="width: 100%; padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px;" maxlength="50">
            </div>

            <!-- Rejection Reason (only shown when rejecting) -->
            <div id="rejectionReasonSection" style="display: none; margin-bottom: 24px;">
                <label style="display: block; font-weight: 500; color: #374151; margin-bottom: 8px;">Reason for Rejection</label>
                <textarea id="rejectionReason" placeholder="Please provide a reason for rejection..." style="width: 100%; padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px; min-height: 80px; resize: vertical;"></textarea>
            </div>

            <!-- Initial Action Buttons -->
            <div id="initialButtons" style="display: flex; justify-content: flex-end; gap: 12px; padding-top: 24px; border-top: 1px solid #e5e7eb;">
                <button type="button" id="cancelBtn" style="background: transparent; color: #6b7280; border: 2px solid #e5e7eb; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer;">Cancel</button>
                <button type="button" id="rejectBtn" style="background: #dc2626; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer;">Reject</button>
                <button type="button" id="approveBtn" style="background: #16a34a; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer;">Approve</button>
            </div>

            <!-- Final Action Buttons (shown after approve/reject is clicked) -->
            <div id="finalButtons" style="display: none; justify-content: flex-end; gap: 12px; padding-top: 24px; border-top: 1px solid #e5e7eb;">
                <button type="button" id="cancelFinalBtn" style="background: transparent; color: #6b7280; border: 2px solid #e5e7eb; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer;">Cancel</button>
                <button type="button" id="finalRejectBtn" style="background: #dc2626; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer;">Confirm Rejection</button>
                <button type="button" id="finalApproveBtn" style="background: #16a34a; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer;">Confirm Approval</button>
            </div>
        </div>
    </div>
</div>